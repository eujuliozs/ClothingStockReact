{"ast":null,"code":"import axios from 'axios';\nclass ApiConsumer {\n  constructor() {\n    this.baseUrl = `https://clothingstock-h5gjhdesbkfyedgn.eastus-01.azurewebsites.net/api`;\n  }\n  async getToken() {\n    try {\n      const response = await axios.post(`${this.baseUrl}/login`, {\n        \"UserName\": \"Julio\",\n        \"PassWord\": \"1234\"\n      });\n      return await response.data.token;\n    } catch (error) {\n      console.error('Erro ao obter o token:', error);\n      throw error;\n    }\n  }\n  async Get(type, id = null) {\n    try {\n      const token = await this.getToken();\n      if (token) {\n        console.log('Token:', token);\n        const response = await axios.get(`${this.baseUrl}/${type}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Dados da requisição:', response.data);\n        return response.data;\n      }\n    } catch (error) {\n      console.error('Erro:', error);\n    }\n  }\n  async PostRequest(clothing, type) {\n    function removeProperty(obj, propToRemove) {\n      const {\n        [propToRemove]: _,\n        ...newObj\n      } = obj;\n      return newObj;\n    }\n    const noIdEntity = removeProperty(clothing, \"id\"); // retira a prop id para ter exito na requisição\n\n    try {\n      console.log(\"TYPE: \", type);\n      console.log(\"Clothing obj:\", clothing);\n      const token = await this.getToken();\n      const response = await axios.post(`${this.baseUrl}/${type}`, noIdEntity, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(response.data);\n      return (await response).data;\n    } catch (error) {\n      console.error(\"Erro\", error);\n    }\n  }\n  async PatchRequest(clothing, type) {\n    const entityParams = {\n      \"id\": clothing.id,\n      \"name\": clothing.name || \"\",\n      \"stock\": clothing.stock || \"\",\n      \"description\": clothing.description || \"\",\n      \"size\": clothing.size || \"\",\n      \"imageurl\": clothing.imageurl || \"\"\n    };\n    console.log(\"Patch request entity params:\", entityParams);\n    try {\n      const token = await this.getToken();\n      const response = axios.patch(`${this.baseUrl}/${type}/${clothing.id}`, null, {\n        params: entityParams,\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      return (await response).data;\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  async DeleteRequest(id, type) {\n    try {\n      const token = await this.getToken();\n      const response = axios.delete(`${this.baseUrl}/${type}/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      return (await response).data;\n    } catch (error) {\n      console.log(\"Erro na requisição delete\", error);\n      throw error;\n    }\n  }\n}\nexport default new ApiConsumer();","map":{"version":3,"names":["axios","ApiConsumer","constructor","baseUrl","getToken","response","post","data","token","error","console","Get","type","id","log","get","headers","Authorization","PostRequest","clothing","removeProperty","obj","propToRemove","_","newObj","noIdEntity","PatchRequest","entityParams","name","stock","description","size","imageurl","patch","params","DeleteRequest","delete"],"sources":["C:/Users/julio/JSrepos/projeto teste/clothing/src/Services/ApiConsumer.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nclass ApiConsumer\r\n{\r\n  baseUrl = `https://clothingstock-h5gjhdesbkfyedgn.eastus-01.azurewebsites.net/api`;\r\n\r\n   async getToken() {\r\n    try {\r\n      const response = await axios.post(`${this.baseUrl}/login`,\r\n        {\r\n            \"UserName\" : \"Julio\",\r\n            \"PassWord\" : \"1234\"\r\n        }\r\n      );\r\n      return await (response.data).token;\r\n    } \r\n    catch (error) {\r\n      console.error('Erro ao obter o token:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n async Get(type, id = null) {\r\n    try {\r\n      const token = await this.getToken();\r\n\r\n      if(token)\r\n      {\r\n        console.log('Token:', token);\r\n  \r\n        const response = await axios.get(`${this.baseUrl}/${type}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        console.log('Dados da requisição:', response.data);\r\n        return response.data\r\n      }\r\n    }\r\n    catch (error) {\r\n      console.error('Erro:', error);\r\n    }\r\n }\r\n\r\n\r\n  \r\n\r\n\r\n async PostRequest(clothing, type) {\r\n\r\n  function removeProperty(obj, propToRemove) {\r\n    const { [propToRemove]: _, ...newObj } = obj;\r\n    return newObj;\r\n  }\r\n\r\n  const noIdEntity = removeProperty(clothing, \"id\"); // retira a prop id para ter exito na requisição\r\n\r\n  try{\r\n    console.log(\"TYPE: \", type)\r\n    console.log(\"Clothing obj:\", clothing)\r\n    const token = await this.getToken();\r\n    const response = await axios.post(`${this.baseUrl}/${type}`, noIdEntity, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    })\r\n    console.log(response.data)\r\n    return (await response).data;\r\n\r\n  }\r\n  catch(error)\r\n  {\r\n    console.error(\"Erro\", error)\r\n  }\r\n  \r\n}\r\n\r\n async PatchRequest(clothing, type) {\r\n  \r\n  const entityParams = {\r\n    \"id\" : clothing.id,\r\n    \"name\" : clothing.name || \"\",\r\n    \"stock\" : clothing.stock || \"\",\r\n    \"description\" : clothing.description || \"\",\r\n    \"size\" : clothing.size || \"\",\r\n    \"imageurl\" : clothing.imageurl || \"\"\r\n  }\r\n\r\n  console.log(\"Patch request entity params:\", entityParams)\r\n  try{\r\n    const token = await this.getToken();\r\n    const response = axios.patch(`${this.baseUrl}/${type}/${clothing.id}`, null, {\r\n      params: entityParams,\r\n      headers: {\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      });\r\n      return (await response).data;\r\n  }\r\n  catch(error)\r\n  {\r\n    console.error(error)\r\n  }\r\n  \r\n}\r\n\r\n  async DeleteRequest(id, type)\r\n  {\r\n    try{\r\n      const token = await this.getToken()\r\n      const response = axios.delete(`${this.baseUrl}/${type}/${id}`, { \r\n        headers: {\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      });\r\n      return (await response).data\r\n    }\r\n    catch(error)\r\n    {\r\n      console.log(\"Erro na requisição delete\", error)\r\n      throw error;\r\n    }\r\n  \r\n\r\n  }\r\n}\r\nexport default new ApiConsumer();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}